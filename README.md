# tracker-care-of

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-—Ç—Ä–µ–∫–µ—Ä –¥–ª—è —É—Ö–æ–¥–∞ –∑–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏(—Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏(—Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏) –∏ –≤–µ–¥–µ–Ω–∏–µ–º –∏—Ö –∞–Ω–∞–º–Ω–µ–∑–∞. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL.

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ C++20 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º CMake –∏ vcpkg –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- CMake 3.25+
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++20 (MSVC, GCC 10+, Clang 12+)
- vcpkg
- PostgreSQL (—Å–µ—Ä–≤–µ—Ä) —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ libpq

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (vcpkg)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:

```powershell
vcpkg install
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL
2. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tracker_care_of`)
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (—Å–º. —Å—Ö–µ–º—É –ë–î)
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (—Ñ–∞–π–ª `.env`, –æ–±—Ä–∞–∑–µ—Ü –≤ `.env.example`)

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### Windows (Visual Studio)

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ VCPKG_ROOT
$env:VCPKG_ROOT = "C:\path\to\vcpkg"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
cmake -S . -B out/build/x64-Debug

# –°–±–æ—Ä–∫–∞
cmake --build out/build/x64-Debug
```

#### Windows (Ninja)

```powershell
cmake -S . -B build -G Ninja
cmake --build build
```

#### Linux/macOS

```bash
export VCPKG_ROOT=/path/to/vcpkg
cmake -S . -B build -G Ninja
cmake --build build
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PowerShell —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ API –∏ CLI:

```powershell
.\start-apps.ps1
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç:
1. **API —Å–µ—Ä–≤–µ—Ä** - –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8080`
   - Swagger UI: `http://localhost:8080/swagger`
2. **CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

**API —Å–µ—Ä–≤–µ—Ä:**
```powershell
# Windows
.\out\build\x64-Debug\apps\api\tracker_api.exe

# Linux/macOS
./build/apps/api/tracker_api
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è:
```
Connected to database successfully!
Starting server on port 8080...
Swagger UI: http://localhost:8080/swagger
```

**CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```powershell
# Windows
.\out\build\x64-Debug\apps\cli\tracker_cli.exe

# Linux/macOS
./build/apps/cli/tracker_cli
```

</br>

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (email/–ø–∞—Ä–æ–ª—å —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º Argon2)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–º –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- –í–µ–¥–µ–Ω–∏–µ –∞–Ω–∞–º–Ω–µ–∑–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –ø–æ–ª–∏–≤–∞ (–¥–ª—è —Ä–∞—Å—Ç–µ–Ω–∏–π)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (CLI)
- API —Å–µ—Ä–≤–µ—Ä —Å Swagger UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- –Ø–∑—ã–∫: C++20
- –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏: CMake (–≤–µ—Ä—Å–∏—è 3.25+)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL (libpq)
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π: Argon2 (unofficial-argon2)
- HTTP —Å–µ—Ä–≤–µ—Ä: Crow (–º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: fmt
- HTTP –∫–ª–∏–µ–Ω—Ç: cpr
- JSON: nlohmann/json
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: Swagger UI (OpenAPI 3.0)
- –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤: vcpkg

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tracker-care-of/
‚îú‚îÄ‚îÄ apps/                           # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/                        # API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ swagger.json           # OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ cli/                        # –ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ include/                # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã UI
‚îÇ       ‚îî‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ UI
‚îú‚îÄ‚îÄ libs/                           # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ common/                     # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ include/tracker_common/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ crypto/                     # –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è (Argon2)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ include/tracker_crypto/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/                       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ include/tracker/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usecases/          # –°–µ—Ä–≤–∏—Å—ã (auth-service)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ db/                         # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ       ‚îú‚îÄ‚îÄ include/tracker_db/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ repositories/      # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ postgres-db.h
‚îÇ       ‚îî‚îÄ‚îÄ src/
‚îú‚îÄ‚îÄ CMakeLists.txt                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ start-apps.ps1                  # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ README.md
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `1) Register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `2) Login` - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

### –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ –º–µ–Ω—é**: –∫–ª–∞–≤–∏—à–∏ —Å–æ —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –∏–ª–∏ `W` / `S`
- **–í—ã–±–æ—Ä –ø—É–Ω–∫—Ç–∞**: `Enter` –∏–ª–∏ `Space`
- **–î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç**: `A` –∏–ª–∏ `+`
- **–£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç**: `Del` (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ `Y`)
- **–ù–∞–∑–∞–¥/–í—ã—Ö–æ–¥**: `Esc`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ –º–æ–¥—É–ª—å–Ω–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É:

- **tracker_common** - –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–ø–∞—Ä—Å–µ—Ä env-—Ñ–∞–π–ª–æ–≤)
- **tracker_crypto** - –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π)
- **tracker_core** - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Patient, User, Water, Anamnesis)
- **tracker_db** - —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, auth-service
- **tracker_cli** - –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **tracker_api** - HTTP API —Å–µ—Ä–≤–µ—Ä (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `tracker_db`)

## API

API —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RESTful –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏ –∏ –∏—Ö –¥–∞–Ω–Ω—ã–º–∏.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é API —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É `API_PORT` –∏–∑ `.env` (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω ‚Äî `8080`).

### Swagger UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

**http://localhost:8080/swagger**

Swagger UI –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ö–µ–º—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

JSON —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è OpenAPI 3.0: `http://localhost:8080/swagger.json`

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **cookie-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** —Å HTTP-only cookies (`session_uuid`).

CLI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Å—Å–∏—è–º–∏ –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å API —á–µ—Ä–µ–∑ `API_URL` –∏–∑ `.env`.

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

```
tracker_cli --> tracker_db --> tracker_core --> tracker_common
                   |             
                   v
            tracker_crypto --> tracker_common
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ **Creative Commons Attribution-NonCommercial 4.0 International (CC BY-NC 4.0)**. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤ —Ñ–∞–π–ª–µ `LICENSE`.
